<template name="contacts">
  <div class="background" style="background-image:url(staff.jpg)">
      <h1>Contacts</h1>
      <div class="contacts section">
        {{> searchBox }}
        {{> searchResult}}
      </div>
    </div>
</template>

<template name="searchBox">
  <div class="searchBox">
    <ul class="contacts collapsible" data-collapsible="accordion">
      <li>
        <div class="contacts collapsible-header active">Quick Search</div>
        <div class="contacts collapsible-body">
          <p>Quick Search only searches the visible fields in the table below. Any fields not visible will not be searched.</p>
          <div class="quick_search"><input type="text" id="search-box" placeholder="Search contacts here" /></div></div>
      </li>
      <li>
        <div class="contacts collapsible-header">Advanced Search</div>
        <div class="contacts collapsible-body">
          {{> advancedSearch}}
        </div>
      </li>
    </ul>
  </div>
</template>

<template name="advancedSearchSelect">
  <select>
    <option value="" disabled selected>Select...</option>
    {{#each this}}
      <option value="{{this}}">{{this}}</option>
    {{/each}}
  </select>
</template>

<template name="advancedSearch">
  <div class="container">
  <form class="col s12">
    <div class="row">
      {{#each selectedContactFields}}
          {{#if options}}
          <div class="input-field col s6">
            {{> advancedSearchSelect options}}
            <label>{{display_name}}</label>
          </div>
          {{else}}
            <div class="input-field col s6">
              <input id="input_{{name}}" type="text" class="validate">
              <label for="input_{{name}}">{{display_name}}</label>
            </div>
          {{/if}}
      {{/each}}
    </div>
    <a class="btn" href="#search">Search</a>
    <a class="btn modal-trigger" href="#fields">Edit Search Fields</a>
  </form>
  <br/>
</div>
<!-- Modal Trigger -->

<!-- Modal Structure -->
<div id="fields" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Edit Visible Fields</h4>
    <div class="row">
    {{#each availableContactFields}}
      <div class="col s6 m6">
        <input type="checkbox" checked="{{userSelectedOrDefault name default}}" class="toggle-checked" id="{{name}}"/>
        <label for="{{name}}">{{display_name}}</label>
      </div>
    {{/each}}
  </div>
  </div>
  <div class="modal-footer">
    <a href="" class="modal-action modal-close btn-flat save_fields">Save</a>
  </div>
</div>
</template>

<template name="searchResult">
  <div id='search-result'>
    <div id="search-meta">
      {{#if isLoading}}
      searching ...
      {{/if}}
    </div>

    <table class="responsive-table hoverable striped">
      <thead>
        <tr>
          {{#each availableContactFields}}
            {{#if default}}
              <th data-field={{name}}>{{display_name}}</th>
            {{/if}}
          {{/each}}
          <th></th>
        </tr>
      </thead>
      <tbody>

        {{#each getContacts}}
        <tr>
          {{#each getFieldValueForContact availableContactFields this}}
            <td>{{this}}</td>
          {{/each}}
          <td><i class="contacts mdi-action-delete"></i></td>
        </tr>
      {{/each}}

      <!-- {{> add_contact}} -->

      </tbody>
    </table>
  </div>
</template>

<template name="add_contact">
  <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large red modal-trigger" href="#modal1"><i class="mdi-content-add"></i></a>
    <!-- <ul>
      <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a></li>
      <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
      <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
      <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
    </ul> -->
  </div>
  {{> modalAddContact}}
</template>

<template name="modalAddContact">
  <div id="modal1" class="modal modal-fixed-footer">
     <div class="modal-content">
       <h4>Add Contact</h4>
       <div class="row">
    <form class="col s12">
      <div class="row">
        <div class="input-field col s6">
          <!-- <i class="material-icons prefix">account_circle</i> -->
          <input id="icon_prefix" type="text" class="validate">
          <label for="icon_prefix">First Name</label>
        </div>
        <div class="input-field col s6">
          <!-- <i class="material-icons prefix">phone</i> -->
          <input id="icon_telephone" type="tel" class="validate">
          <label for="icon_telephone">Telephone</label>
        </div>
      </div>
    </form>
  </div>
     </div>
     <div class="modal-footer">
       <a href="#!" class="modal-action modal-close btn-flat ">Add</a>
       <a href="#!" class="modal-action modal-close btn-flat ">Cancel</a>
     </div>
   </div>
</template>
