<template name="contacts">
  <!-- <div class="background" style="background-image:url(staff.jpg)"> -->
  <div class="background">
      <h1>Contacts <span><a class='dropdown-button btn menu_button' data-beloworigin="true" href='#' data-activates='dropdown1'>Menu</a></span></h1>
      <ul id='dropdown1' class='dropdown-content menu_button'>
        <li><a href="#!">Bulk upload</a></li>
        <li class="divider"></li>
        <li><a href="#!">Add Contact</a></li>
        <li class="divider"></li>
        <li><a class="modal-trigger-save-search" href="#save">Save search query</a></li>
        <li><a class="modal-trigger-open-search" href="#open">Open search query</a></li>
      </ul>
      {{> modal_save}}
      {{> modal_open}}
      <div class="contacts section">
        {{> searchBox }}
        {{> searchResult}}
      </div>
    </div>
</template>

<template name="searchBox">
  <div class="searchBox">
    <ul class="contacts collapsible" data-collapsible="accordion">
      <li>
        <div class="contacts collapsible-header active">Quick Search</div>
        <div class="contacts collapsible-body">
          {{> quickSearch}}
        </div>
      </li>
      <li>
        <div class="contacts collapsible-header">Advanced Search</div>
        <div class="contacts collapsible-body">
          {{> advancedSearch}}
        </div>
      </li>
    </ul>
  </div>
</template>

<template name="quickSearch">
  <div class="quick_search">
    {{> reactiveTableFilter id="myFilter" label="Quick Search only searches the visible fields in the table below. Any fields not visible will not be searched." }}
  </div>
</template>

<template name="advancedSearch">
  <div class="container">
  <form class="col s12">
    <div class="row">
      {{#each selectedContactFields}}
          {{#if options}}
          <div class="input-field col s6">
            {{> advancedSearchSelect options}}
            <label>{{display_name}}</label>
          </div>
          {{else}}
            <div class="input-field col s6">
              <input id="input_{{name}}" type="text" class="validate">
              <label for="input_{{name}}">{{display_name}}</label>
            </div>
          {{/if}}
      {{/each}}
    </div>
    <a class="btn" href="#search">Search</a>
    <a class="btn modal-trigger" href="#fields">Edit Search Fields</a>
  </form>
  <br/>
</div>
<!-- Modal Trigger -->

<!-- Modal Structure -->
<div id="fields" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Edit Visible Fields</h4>
    <div class="row">
    {{#each availableContactFields}}
      <div class="col s6 m6">
        <input type="checkbox" checked="{{userSelectedSearchableOrDefault name default}}" class="toggle-checked" id="{{name}}"/>
        <label for="{{name}}">{{display_name}}</label>
      </div>
    {{/each}}
  </div>
  </div>
  <div class="modal-footer">
    <a href="" class="modal-action modal-close btn-flat save_fields">Save</a>
  </div>
</div>
</template>

<template name="advancedSearchSelect">
  <select>
    <option value="" disabled selected>Select...</option>
    {{#each this}}
      <option value="{{this}}">{{this}}</option>
    {{/each}}
  </select>
</template>

<template name="searchResult">
  <div class="buttons_menu">
    <a class="btn modal-trigger-columns" href="#columns">Edit Columns</a>
    <a class="btn">Export</a>
  </div>
  {{> reactiveTable collection="contacts" settings=settings}}

  <div id="columns" class="modal modal-fixed-footer">
    <div class="modal-content">
      <h4>Edit Visible Columns</h4>
      <div class="row">
      {{#each availableContactFields}}
        <div class="col s6 m6">
          <input type="checkbox" checked="{{userSelectedVisibleOrDefault name default}}" class="toggle-checked" id="column_{{name}}"/>
          <label for="column_{{name}}">{{display_name}}</label>
        </div>
      {{/each}}
    </div>
    </div>
    <div class="modal-footer">
      <a href="" class="modal-action modal-close btn-flat save_columns">Save</a>
      <a href="#!" class="modal-action modal-close btn-flat ">Cancel</a>

    </div>
  </div>

</template>

<template name="add_contact">
  <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
    <a class="btn-floating btn-large red modal-trigger" href="#modal1"><i class="mdi-content-add"></i></a>
    <!-- <ul>
      <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a></li>
      <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
      <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
      <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
    </ul> -->
  </div>
  {{> modalAddContact}}
</template>

<template name="modalAddContact">
  <div id="modal1" class="modal modal-fixed-footer">
     <div class="modal-content">
       <h4>Add Contact</h4>
       <div class="row">
    <form class="col s12">
      <div class="row">
        <div class="input-field col s6">
          <!-- <i class="material-icons prefix">account_circle</i> -->
          <input id="icon_prefix" type="text" class="validate">
          <label for="icon_prefix">First Name</label>
        </div>
        <div class="input-field col s6">
          <!-- <i class="material-icons prefix">phone</i> -->
          <input id="icon_telephone" type="tel" class="validate">
          <label for="icon_telephone">Telephone</label>
        </div>
      </div>
    </form>
  </div>
     </div>
     <div class="modal-footer">
       <a href="#!" class="modal-action modal-close btn-flat ">Add</a>
       <a href="#!" class="modal-action modal-close btn-flat ">Cancel</a>
     </div>
   </div>
</template>

<!---MODALS--->
<template name="modal_save">
  <div id="save" class="modal modal-fixed-footer save">
    <div class="modal-content">
      <h4>Save Search Query</h4>
      <p>When you save a search query, you are saving the search parameters (e.g. Firstname = "John", Lastname ="Smith")</p>
      <p>You will be able to get the latest list of contacts whenever you open a saved search query</p>
      <form class>
        <div class="input-field">
          <input type="text" id="search_name" clas="validate">
          <label for="search_name">Give your search a name</label>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <a href="" class="modal-action modal-close btn-flat menu_save">Save</a>
      <a href="#!" class="modal-action modal-close btn-flat ">Cancel</a>
    </div>
  </div>
</template>

<template name="modal_open">
  <div id="open" class="modal modal-fixed-footer">
    <div class="modal-content">
      <h4>Open Search</h4>
      <ul>
      {{#each getUserSearches}}
        <li><a href="#" id="{{this._id}}" class="open_search">{{this.quickSearchName}}</a></li>
      {{/each}}
      </ul>
    </div>
    <div class="modal-footer">
      <a href="" class="modal-action modal-close btn-flat menu_open">Save</a>
      <a href="#!" class="modal-action modal-close btn-flat ">Cancel</a>
    </div>
  </div>
</template>
